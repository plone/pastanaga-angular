@import "./variables";

.pa-table-grid {
    display: grid;
}
.pa-table-grid--head {
    display: contents;

    .pa-table-grid--header {
        position: sticky;
        top: 0;
        min-height: rhythm(4);
        background: $color-background-table-header;
        border-bottom: 1px $color-border-table-header solid;
        color: $color-text-table-header;
        font-size: font-size(xs);
        font-weight: $font-weight-text-table-header;
        text-transform: uppercase;
    }
    .pa-table-grid--row > :first-child  {
        z-index: 2;
    }
}
.pa-table-grid--body {
    display: contents;

    .pa-table-grid--header {
        border-bottom: 1px $color-border-table-row solid;
        background:$color-background-table-row;
    }

    .pa-table-grid--row:hover .pa-table-grid--header,
    .pa-table-grid--row:hover .pa-table-grid--cell {
        background: $color-background-table-row-hover;
    }

    .pa-selected .pa-table-grid--row .pa-table-grid--header,
    .pa-selected .pa-table-grid--row .pa-table-grid--cell,
    .pa-selected .pa-table-grid--row:hover .pa-table-grid--header,
    .pa-selected .pa-table-grid--row:hover .pa-table-grid--cell {
        background: $color-background-table-row-selected;
    }

    /*
     * FIXME: when table-grid-cell contains a button and you click on it, currently the whole line has the active state.
     * We need to find a way of preventing that.
     */
    .pa-table-grid--row:active .pa-table-grid--header,
    .pa-table-grid--row:active .pa-table-grid--cell {
        background: $color-background-table-row-active;
    }
}

.pa-table-grid--row {
    display: contents;
    font-size: $font-size-table-row;
    font-weight: $font-weight-table-row;

    .pa-table-grid--row-header {
        grid-column: 1 / -1;
        font-weight: $font-weight-text-table-header-row;
        font-size: font-size(xs);
        background: $color-background-table-header-row;
        color: $color-text-table-header-row;
        margin-top: -1px;
        padding: rhythm(.5) rhythm(1);
        border-top: 1px solid $color-border-table-header-row;
        position: sticky;
        top: rhythm(4);
        z-index: 3;
    }

    &:not(.pa-table-grid--row--last) {
        .pa-table-grid--cell {
            border-bottom: 1px $color-border-table-row solid;
        }
    }
}

.pa-table-grid--header {
    display: flex;
    align-items: center;
    padding: 0 rhythm(1);
}
.pa-table-grid--cell {
    display: flex;
    align-items: center;
    padding: rhythm(1);
    min-height: rhythm(8);
}

.pa-table-grid--cell {
    background: $color-background-table-row;
    color: $color-text-table-row;
}

.pa-table-grid--menu-cell {
    justify-content: center;

    .pa-button {
        background: $color-background-table-menu-button !important;

        &:hover {
            background: $color-background-table-menu-button-hover !important;

            svg {
                fill: $color-icon-table-menu-button-hover !important;
            }
        }
        &:active {
            background: $color-background-table-menu-button-active !important;
        }

        svg {
            fill: $color-icon-table-menu-button !important;
        }
    }
}


// ignore Angular components
pa-table-row, pa-table-row-header, pa-table-header, pa-table-cell, pa-table-cell-menu, pa-table-cell-header-sortable {
    display: contents;
}

@media (min-width: $size-viewport-medium-min) {
    .pa-table-grid--cell {
        padding: rhythm(1.5);
    }
}

@media (min-width: $size-viewport-large-min) {
    .pa-table-grid--header,
    .pa-table-grid--cell {
        cursor: default;
    }
    .pa-table-grid--header.clickable,
    .pa-table-grid--cell.clickable {
        cursor: pointer;
    }
    .pa-table-grid--menu-cell:not(.pa-table-grid--header) pa-button {
        opacity: 0;
        &:focus-within {
            opacity: 1;
        }
    }
    .pa-table-grid--row:hover .pa-table-grid--menu-cell pa-button {
        opacity: 1;
    }
}
