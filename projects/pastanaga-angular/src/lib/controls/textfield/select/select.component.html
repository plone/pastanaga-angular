<div class="pa-field pa-select"
     [class.pa-field-readonly]="readonly"
     [class.pa-field-disabled]="control.disabled"
     [class.pa-field-error]="control.dirty && control.invalid">
    <div #selectInput class="select-input pa-field-control"
         paFocusable
         cdkMonitorElementFocus
         sameWidth
         [class.pa-field-control-filled]="hasValue || isOpened"
         [class.read-only]="readonly"
         [class.disabled]="control.disabled"
         [class.dim]="dim"
         [class.expanded]="isOpened"
         [id]="id"
         [attr.name]="name"
         [attr.aria-label]="label"
         [attr.aria-describedby]="describedById"
         [paPopup]="optionsDropdown"
         [popupPosition]="{position: 'absolute', left: '0', right: '0', top: dim ? '40px' : '48px'}"
         [popupDisabled]="control.disabled || readonly"
         (cdkFocusChange)="onControlFocused($event)">
        <span class="pa-select-value"
              [class.placeholder]="!hasValue"
              [class.active]="isOpened"
        >{{displayedValue}}</span>
    </div>

    <label class="pa-field-label" [class.pa-sr-only]="dim" [for]="id">{{label}}</label>

    <pa-icon class="pa-select-chevron"
             name="chevron-down"
             [class.opened]="isOpened"
             (click)="toggleDropdown()"></pa-icon>

    <pa-form-field-hint
        [id]="describedById"
        [help]="help"
        [errors]="control.errors"
        [showErrors]="control.dirty"
        [showAllErrors]="showAllErrors"
        [errorMessages]="errorMessages"
    ></pa-form-field-hint>

    <pa-dropdown #optionsDropdown
                 role="listbox"
                 dontAdjustPosition
                 [adjustHeight]="adjustHeight"
                 [companionElement]="selectInput"
                 (onClose)="dropDownClosed()"
                 (onOpen)="dropDownOpened()"
                 >

        <ng-container *ngIf="dropDownModels.length; else contentOptions">
            <pa-select-options
                [options]="dropDownModels"
                (optionSelected)="selectOption($event)"
            ></pa-select-options>
        </ng-container>

        <ng-template #contentOptions><ng-content></ng-content></ng-template>

    </pa-dropdown>
</div>
